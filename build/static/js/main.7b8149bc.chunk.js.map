{"version":3,"sources":["services/persons.js","components/Filter.js","components/PersonForm.js","components/Persons.js","components/Notification.js","App.js","index.js"],"names":["baseUrl","services_persons","axios","get","then","response","data","newPerson","post","id","delete","concat","put","SearchInput","_ref","searchName","handleSearch","react_default","a","createElement","onChange","value","AddInput","props","handleSubmit","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","Persons","persons","handleDelete","filteredNames","filter","person","name","toLowerCase","indexOf","map","index","key","number","onClick","Notification","message","className","success","App","_useState","useState","_useState2","Object","slicedToArray","setPersons","_useState3","_useState4","setNewName","_useState5","_useState6","setNewNumber","_useState7","_useState8","setSearchName","_useState9","_useState10","errorMessage","setErrorMessage","useEffect","personService","initialPersons","components_Notification","Filter","event","target","PersonForm","preventDefault","length","forEach","newId","console","log","window","confirm","objectSpread","setTimeout","catch","error","components_Persons","personDelete","find","ReactDOM","render","src_App_0","document","getElementById"],"mappings":"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","file":"static/js/main.7b8149bc.chunk.js","sourcesContent":["import axios from \"axios\";\r\nconst baseUrl = \"/api/persons\";\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nconst add = newPerson => {\r\n  const request = axios.post(baseUrl, newPerson);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nconst remove = id => {\r\n  const request = axios.delete(`${baseUrl}/${id}`, id);\r\n  return request;\r\n};\r\n\r\nconst replace = (id, newPerson) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newPerson);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nexport default { getAll, add, remove, replace };\r\n","import React from \"react\";\r\n\r\nconst SearchInput = ({ searchName, handleSearch }) => {\r\n  return (\r\n    <div>\r\n      filter shown with <input onChange={handleSearch} value={searchName} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SearchInput;\r\n","import React from \"react\";\r\n\r\nconst AddInput = props => {\r\n  const {\r\n    handleSubmit,\r\n    newName,\r\n    handleNameChange,\r\n    newNumber,\r\n    handleNumberChange\r\n  } = props;\r\n\r\n  return (\r\n    <div>\r\n      <form onSubmit={handleSubmit}>\r\n        <div>\r\n          name: <input onChange={handleNameChange} value={newName} />\r\n        </div>\r\n        <div>\r\n          number: <input onChange={handleNumberChange} value={newNumber} />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AddInput;\r\n","import React from \"react\";\r\n\r\nconst Persons = ({ persons, searchName, handleDelete }) => {\r\n  const filteredNames = persons.filter(\r\n    person => person.name.toLowerCase().indexOf(searchName.toLowerCase()) >= 0\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      <div>\r\n        {filteredNames.map((person, index) => (\r\n          <p key={index}>\r\n            {person.name} {person.number}\r\n            <button\r\n              onClick={() => {\r\n                handleDelete(person.id);\r\n              }}\r\n            >\r\n              delete\r\n            </button>\r\n          </p>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Persons;\r\n","import React from \"react\";\r\n\r\nconst Notification = ({ message }) => {\r\n  if (message === null) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className={message.success ? \"notification\" : \"error\"}>\r\n      {message.message}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Notification;\r\n","import React, { useState, useEffect } from \"react\";\nimport personService from \"./services/persons\";\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport Notification from \"./components/Notification\";\nimport \"./App.css\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [searchName, setSearchName] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  useEffect(() => {\n    personService.getAll().then(initialPersons => setPersons(initialPersons));\n  }, []);\n\n  const handleNameChange = event => {\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = event => {\n    setNewNumber(event.target.value);\n  };\n\n  const handleSearch = event => {\n    setSearchName(event.target.value);\n  };\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    const dublicate = persons.filter(person => person.name === newName);\n\n    if (dublicate.length === 1) {\n      persons.forEach(person => {\n        if (person.name === newName) {\n          const newId = person.id;\n          console.log(person)\n          const replace = window.confirm(\n            `${\n              person.name\n            } is already added to phonebook, replace the old number with a new one?`\n          );\n\n          if (replace) {\n            personService\n              .replace(newId, { ...person, number: newNumber })\n              .then(newPerson => {\n                setPersons(\n                  persons.map(person => {\n                    return person.id !== newId ? person : newPerson;\n                  })\n                );\n                setErrorMessage({\n                  message: `Replaced number for ${newPerson.name}`,\n                  success: true\n                });\n                setTimeout(() => {\n                  setErrorMessage(null);\n                }, 3000);\n              })\n              .catch(error => {\n                setErrorMessage({\n                  message: `Information of has already been removed from server`,\n                  success: false\n                });\n                setTimeout(() => {\n                  setErrorMessage(null);\n                  setPersons(persons.filter(person => person.id !== newId));\n                }, 3000);\n              });\n          }\n        }\n      });\n    } else {\n      personService\n        .add({ name: newName, number: newNumber })\n        .then(newPerson => {\n          setPersons(persons.concat(newPerson));\n          setErrorMessage({\n            message: `Added ${newPerson.name}`,\n            success: true\n          });\n          setTimeout(() => {\n            setErrorMessage(null);\n          }, 3000);\n        });\n    }\n\n    setNewName(\"\");\n    setNewNumber(\"\");\n  };\n\n  const handleDelete = id => {\n    const personDelete = persons.find(person => person.id === id);\n    const confirmRemoval = window.confirm(`Delete ${personDelete.name}?`);\n\n    if (confirmRemoval) {\n      personService.remove(id).then(() => {\n        setPersons(persons.filter(person => person.id !== id));\n        setErrorMessage({\n          message: `Deleted ${personDelete.name}`,\n          success: true\n        });\n        setTimeout(() => {\n          setErrorMessage(null);\n        }, 3000);\n      });\n    }\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={errorMessage} />\n      <Filter handleSearch={handleSearch} />\n      <h3>Add a new</h3>\n      <PersonForm\n        handleSubmit={handleSubmit}\n        newName={newName}\n        handleNameChange={handleNameChange}\n        newNumber={newNumber}\n        handleNumberChange={handleNumberChange}\n      />\n      <h3>Numbers</h3>\n      <Persons\n        persons={persons}\n        searchName={searchName}\n        handleDelete={handleDelete}\n      />\n    </div>\n  );\n};\n\nexport default App;","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}